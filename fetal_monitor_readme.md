# Фетальный монитор с интеграцией ONNX-модели и СППР на процессоре NXP

## Описание решения

Данное решение представляет собой веб-интерфейс для мониторинга состояния плода в реальном времени с использованием обученной модели машинного обучения в формате **ONNX** и встроенной системы поддержки принятия решений (СППР) на базе процессора **NXP**. Система обеспечивает:
- Отображение показателей ЧСС, артериального давления и движений плода.
- Прогноз состояния плода с визуализацией риска (нормальный, средний, высокий).
- Анимированные градиентные линии прогноза и динамические фоновые зоны на графике.
- Взаимодействие с медицинскими информационными системами (МИС) через стандартизированные протоколы передачи данных.

## Области применения

- Родильные дома и перинатальные центры для мониторинга состояния плода.
- Образовательные и исследовательские учреждения для симуляции показаний фетального монитора.
- Интеграция с МИС для автоматического занесения результатов в электронные медицинские карты.

## Дорожная карта проекта

| Этап | Задачи | Сроки |
|------|--------|-------|
| 1 | Разработка веб-интерфейса с визуализацией графиков | 2 недели |
| 2 | Интеграция модели машинного обучения ONNX | 1 неделя |
| 3 | Разработка функций СППР на ядре NXP | 2 недели |
| 4 | Имплементация градиентных линий прогноза и динамических зон риска | 1 неделя |
| 5 | Тестирование симуляции и веб-интерфейса | 1 неделя |
| 6 | Интеграция с МИС (Авиценна) | 2 недели |
| 7 | Документация и подготовка к развертыванию | 1 неделя |

## Технические особенности процессора NXP и СППР

Процессор **NXP** выбран за высокую производительность и поддержку вычислений в реальном времени. Технические возможности:
- **Ядро Cortex-M7/M33** с поддержкой FPU и DSP-инструкций.
- Встроенная поддержка работы с **ONNX-моделями** через оптимизированный runtime.
- Реализация функций СППР (система поддержки принятия решений) прямо на ядре:
  - Обработка входных показателей в реальном времени.
  - Расчет прогнозов риска по обученной модели.
  - Генерация сигналов тревоги и рекомендации для медперсонала.

## Примеры интеграции с МИС (Авиценна)

### Вариант 1: HL7 v2 через TCP/IP
- **Протокол:** HL7 v2 (ORM/ORU сообщения)
- **Способ передачи:** TCP/IP сокет.
- **Описание:** Модель отправляет результаты прогноза плода в формате ORU^R01 каждые 30 секунд, включая ЧСС, давление, движения плода и риск. МИС Авиценна получает и сохраняет данные в электронную карту пациента.

### Вариант 2: FHIR API через HTTPS
- **Протокол:** FHIR REST API
- **Способ передачи:** HTTPS POST с JSON.
- **Описание:** Каждое измерение и прогноз передаются в ресурс Observation с указанием типа измерения, единиц и прогнозного значения. МИС Авиценна автоматически интегрирует данные в историю наблюдений.

### Вариант 3: SOAP Web Service
- **Протокол:** SOAP XML
- **Способ передачи:** HTTPS SOAP-запросы
- **Описание:** Результаты прогноза передаются периодически через SOAP-запросы, включая идентификатор пациента, показатели и оценку риска. МИС Авиценна принимает XML и обновляет показатели в интерфейсе мониторинга.

## Структура проекта

```
/fetal_monitor_project
│
├── /web
│   ├── index.html           # Веб-интерфейс с графиками и визуализацией прогноза
│   ├── fetal_monitor.js     # Логика симуляции, подключение ONNX, СППР
│   └── styles.css           # Стили для веб-интерфейса
│
├── /models
│   └── catboost_model.onnx  # Обученная ONNX модель
│
├── /scaler
│   └── scaler.pkl           # Масштабировщик данных
│
├── /docs
│   └── Readme.md            # Техническая документация проекта
│
└── /integration
    └── integration_examples.md # Примеры интеграции с МИС Авиценна
```

**Примечание:** данная структура позволяет развернуть проект локально или на сервере, с лёгкой интеграцией в МИС и расширением функционала СППР на процессоре NXP.

